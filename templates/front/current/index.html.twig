{% extends 'base.html.twig' %}


{% block content %}

	<h1 class="text-center color-white">Projets en cours</h1>
	<div class="mb-3"></div>
	<div class="separator"></div>
	<div class="row">
		<div class="col padding-mobile">
			{% if is_granted('IS_AUTHENTICATED_FULLY') and is_granted('ROLE_ADMIN') %}
				{% if projects is empty %}
				<p class="text-center color-white mt-2">Aucun projet n'a encore été ajouté</p>
				<p class="text-center color-white mt-2">Ajouter un projet <a href="{{ path('project_add') }}">ici</a></p>
				{% else %}
				<div class="d-flex flex-row-reverse">
					<a href="{{ path('project_add') }}" title="Ajouter un client" type="button" class="btn mb-3">
						<i class="color-white fas fa-plus-circle"></i>
					</a>
				</div>
						<table class="table mb-5 table-bordered">
							<thead class="bg-blue-dark-light table-borderless">
								<tr>
									<th class="color-yellow text-bold" scope="col">Nom du<br> client</th>
									<th class="color-yellow text-bold" scope="col">Installation<br> Wordpress</th>
									<th class="color-yellow text-bold" scope="col">Brief<br> client</th>
									<th class="color-yellow text-bold" scope="col">Nom de<br> domaine</th>
									<th class="color-yellow text-bold" scope="col">Coming<br> soon</th>
									<th class="color-yellow text-bold" scope="col">Contenu<br> client</th>
									<th class="color-yellow text-bold" scope="col">Maquette<br> en cours</th>
									<th class="color-yellow text-bold" scope="col">Maquette<br> envoyée</th>
									<th class="color-yellow text-bold" scope="col">Maquette<br> validée</th>
									<th class="color-yellow text-bold" scope="col">Intégration</th>
									<th class="color-yellow text-bold" scope="col">Formation</th>
									<th class="color-yellow text-bold" scope="col">Mise en ligne</th>
									{% if is_granted('IS_AUTHENTICATED_FULLY') and is_granted('ROLE_ADMIN')%}
										<th class="color-yellow text-bold" scope="col">Action</th>
									{% endif %}
								</tr>
							</thead>
							<tbody class="bg-blue-dark ">
								{% for project in projects %}
									{% if project.finished == false %}
									<tr class="form-switch">
										<td class="color-white text-bold">{{ project.customer }}</td>
										<td class="color-white text-bold">{% if project.wordpressInstallation is empty %}<span>Inconnue</span>{% else %}{{
											project.wordpressInstallation|date('d-m-Y') }}{% endif %}</td>
										<td class="text-center">
											<input class="customerbrief form-check-input" type="checkbox" {{ (project.customerbrief) ? 'checked' : ''}} data-customerbrief="{{project.id}}">
										</td>
										<td>
											<input type="checkbox" class="domainname form-check-input" {{ (project.domainname) ? 'checked' : ''}} data-domainname="{{project.id}}">
										</td>
									
										<td>
											<input type="checkbox" class="comingsoon form-check-input" {{ (project.comingsoon) ? 'checked' : ''}} data-comingsoon="{{project.id}}">
										</td>
									
										<td>
											<input type="checkbox" class="customercontentreception form-check-input" {{ (project.customercontentreception) ? 'checked' : ''}} data-customercontentreception="{{project.id}}">
										</td>

										<td>
											<input type="checkbox" class="webdesignprogress form-check-input" {{ (project.webdesignprogress) ? 'checked' : ''}} data-webdesignprogress="{{project.id}}">
										</td>

										<td>
											<input type="checkbox" class="webdesignsend form-check-input" {{ (project.webdesignsend) ? 'checked' : ''}} data-webdesignsend="{{project.id}}">
										</td>

										<td>
											<input type="checkbox" class="webdesignvalidated form-check-input" {{ (project.webdesignvalidated) ? 'checked' : ''}} data-webdesignvalidated="{{project.id}}">
										</td>

										<td>
											<input type="checkbox" class="webintegration form-check-input" {{ (project.webintegration) ? 'checked' : ''}} data-webintegration="{{project.id}}">
										</td>

										<td>
											<input type="checkbox" class="webtraining form-check-input" {{ (project.webtraining) ? 'checked' : ''}} data-webtraining="{{project.id}}">
										</td>

										<td class="color-white text-bold">{% if project.online is empty %}<span>Inconnue</span>{% else %}{{ project.online|date('d-m-Y') }}{% endif %}</td>


										{% if is_granted('IS_AUTHENTICATED_FULLY') and is_granted('ROLE_ADMIN')%}
										<td>
                                            <a href="{{ path('finishedprojects', {"id": project.id}) }}" title="Passer en projet fini"><i class="color-white fas fa-chevron-right"></i></a>
                                            <span class="color-white">|</span>
                                            {% if project.webtraining == 0 %}{% else %}
                                            {% endif %}
                                            <a href="{{ path('project_modify', {"id": project.id}) }}"  title="Modifier"><i class="color-white fas fa-cog"></i></a>
                                            <span class="color-white">|</span>
											<a href="{{ path('project_detete', {"id": project.id}) }}" onclick="return confirm('Attention vous vous apprêtez à supprimer un projet')"  title="Supprimer"><i class="color-white fas fa-trash"></i></a>
											</td>
										{% endif %}	
									</tr>
									{% endif %}
								{% endfor %}
							</tbody>
						</table>
						{% endif %}
					{% endif %}
				</div>
	{% endblock %}
